<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="openDoor.css" rel="stylesheet">
</head>
<body>
<div id="doorBox" class="door-box">
    <div class="wall">
        <div class="door-border">
            <div class="door-frame">
                <!-- 门 -->
                <div id="door" class="door">
                    <!-- 门后的光线 -->
                    <div id="light" class="light" style="opacity: .8;" hidden=""></div>
                    <!-- 门后 -->
                    <div class="door-face-0"></div>
                    <!-- 三个面 -->
                    <div class="door-face-2"></div>
                    <div class="door-face-1">
                        <!-- 门上的挂牌 -->
                        <div class="door-card">我的书房</div>
                        <!-- 进入按钮 -->
                        <div class="door-btn">
                            <button id="doorBtnIn" class="door-in">进入</button>
                        </div>
                    </div>
                    <div class="door-face-3"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 书房 -->
<img src="http://img1.tplm123.com/2008/06/20/36984/7009074061063.jpg" class="room-img" width="375" height="500">
<!--<div hidden><audio id="audioOpen" src="./open.mp3" preload></audio></div>-->
<script>
    // 门，光线这类运动元素
    var eleDoor = document.getElementById('door');
    var eleLight = document.getElementById('light');
    var eleDoorBox = document.getElementById('doorBox');
    // 开门音效mp3
    var eleAudioOpen = document.getElementById('audioOpen');
    // 开门动画
    var percentDoor = 0;
    var fnOpenDoor = function () {
        percentDoor++;
        // 门完全打开后，进入下一个画面
        if (percentDoor == 100) {
            eleDoorBox.classList.add('active');
            return;
        }
        // 门打开
        eleDoor.style.transform = 'rotateY('+ (-90 * percentDoor / 100) +'deg)';
        eleLight.removeAttribute('hidden');
        // 光线变化
        eleLight.style.opacity = 0.8 - 0.9 * percentDoor / 100;

        setTimeout(fnOpenDoor, 16);
    };
    document.querySelector('#doorBtnIn').addEventListener('click', function () {
        fnOpenDoor();
    });
</script>
</body>
</html>